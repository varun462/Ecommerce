{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{useCart}from'./CartContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductPage=()=>{const[products,setProducts]=useState([]);const{addToCart}=useCart();const[searchTerm,setSearchTerm]=useState('');const[currentPage,setCurrentPage]=useState(1);const[productsPerPage]=useState(5);// Number of products per page\nconst navigate=useNavigate();useEffect(()=>{const fetchProducts=async()=>{try{const response=await axios.get('http://localhost:3001/api/products');setProducts(response.data);}catch(error){console.error('Error fetching products:',error);}};fetchProducts();},[]);const handleAddToCart=product=>{addToCart(product);navigate('/cart');// Navigate to cart page after adding to cart\n};const filteredProducts=products.filter(product=>product.name.toLowerCase().includes(searchTerm.toLowerCase()));// Pagination logic\nconst indexOfLastProduct=currentPage*productsPerPage;const indexOfFirstProduct=indexOfLastProduct-productsPerPage;const currentProducts=filteredProducts.slice(indexOfFirstProduct,indexOfLastProduct);// Change page\nconst paginate=pageNumber=>setCurrentPage(pageNumber);const logout=async()=>{try{await axios.post('http://localhost:3001/api/logout');// Remove the JWT token from local storage\nlocalStorage.removeItem('token');// Redirect to the login page\n// Note: You need to define navigate function or use another method to redirect\n// navigate('/login');\n}catch(error){console.error('Error logging out:',error);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Product Page\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search products...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:{marginBottom:'16px'}}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,children:\"Logout\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexWrap:'wrap'},children:currentProducts.map(product=>/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #ccc',padding:'16px',margin:'16px',width:'200px'},children:[/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.name,style:{width:'100%'}}),/*#__PURE__*/_jsx(\"h3\",{children:product.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: $\",product.price]}),/*#__PURE__*/_jsx(\"p\",{children:product.description}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddToCart(product),children:\"Add to Cart\"})]},product._id))}),/*#__PURE__*/_jsx(\"div\",{children:Array.from({length:Math.ceil(filteredProducts.length/productsPerPage)},(_,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>paginate(index+1),children:index+1},index))})]});};export default ProductPage;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","useCart","jsx","_jsx","jsxs","_jsxs","ProductPage","products","setProducts","addToCart","searchTerm","setSearchTerm","currentPage","setCurrentPage","productsPerPage","navigate","fetchProducts","response","get","data","error","console","handleAddToCart","product","filteredProducts","filter","name","toLowerCase","includes","indexOfLastProduct","indexOfFirstProduct","currentProducts","slice","paginate","pageNumber","logout","post","localStorage","removeItem","children","type","placeholder","value","onChange","e","target","style","marginBottom","onClick","display","flexWrap","map","border","padding","margin","width","src","image","alt","price","description","_id","Array","from","length","Math","ceil","_","index"],"sources":["C:/Users/varun/Ecommerce-Platform/frontend/src/Pages/Product.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { useCart } from './CartContext';\n\nconst ProductPage = () => {\n    const [products, setProducts] = useState([]);\n    const { addToCart } = useCart();\n    const [searchTerm, setSearchTerm] = useState('');\n    const [currentPage, setCurrentPage] = useState(1);\n    const [productsPerPage] = useState(5); // Number of products per page\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const fetchProducts = async () => {\n            try {\n                const response = await axios.get('http://localhost:3001/api/products');\n                setProducts(response.data);\n            } catch (error) {\n                console.error('Error fetching products:', error);\n            }\n        };\n\n        fetchProducts();\n    }, []);\n\n    const handleAddToCart = (product) => {\n        addToCart(product);\n        navigate('/cart'); // Navigate to cart page after adding to cart\n    };\n\n    const filteredProducts = products.filter((product) =>\n        product.name.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n\n    // Pagination logic\n    const indexOfLastProduct = currentPage * productsPerPage;\n    const indexOfFirstProduct = indexOfLastProduct - productsPerPage;\n    const currentProducts = filteredProducts.slice(indexOfFirstProduct, indexOfLastProduct);\n\n    // Change page\n    const paginate = (pageNumber) => setCurrentPage(pageNumber);\n\n    const logout = async () => {\n        try {\n            await axios.post('http://localhost:3001/api/logout');\n            // Remove the JWT token from local storage\n            localStorage.removeItem('token');\n            // Redirect to the login page\n            // Note: You need to define navigate function or use another method to redirect\n            // navigate('/login');\n        } catch (error) {\n            console.error('Error logging out:', error);\n        }\n    };\n\n    return (\n        <div>\n            <h2>Product Page</h2>\n            <input\n                type=\"text\"\n                placeholder=\"Search products...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                style={{ marginBottom: '16px' }}\n            />\n              <button onClick={logout}>Logout</button>\n            <div style={{ display: 'flex', flexWrap: 'wrap' }}>\n                {currentProducts.map((product) => (\n                    <div key={product._id} style={{ border: '1px solid #ccc', padding: '16px', margin: '16px', width: '200px' }}>\n                        <img src={product.image} alt={product.name} style={{ width: '100%' }} />\n                        <h3>{product.name}</h3>\n                        <p>Price: ${product.price}</p>\n                        <p>{product.description}</p>\n                        <button onClick={() => handleAddToCart(product)}>Add to Cart</button>\n                    </div>\n                ))}\n            </div>\n\n            {/* Pagination */}\n            <div>\n                {Array.from({ length: Math.ceil(filteredProducts.length / productsPerPage) }, (_, index) => (\n                    <button key={index} onClick={() => paginate(index + 1)}>\n                        {index + 1}\n                    </button>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default ProductPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}