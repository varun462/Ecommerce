{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{useCart}from'./CartContext';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faShoppingCart}from'@fortawesome/free-solid-svg-icons';import'./productstyle.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductPage=()=>{const[products,setProducts]=useState([]);const{addToCart,cart}=useCart();// Access the cart\nconst[searchTerm,setSearchTerm]=useState('');const[currentPage,setCurrentPage]=useState(1);const[productsPerPage]=useState(10);// Number of products per page\nconst navigate=useNavigate();useEffect(()=>{const fetchProducts=async()=>{try{const response=await axios.get('https://ecommerce-5-730y.onrender.com/api/products');setProducts(response.data);}catch(error){console.error('Error fetching products:',error);}};fetchProducts();},[]);useEffect(()=>{setCurrentPage(1);},[searchTerm]);const handleAddToCart=product=>{addToCart(product);};const handledescription=(product,description,image)=>{navigate('/DescriptionPage',{state:{product,description,image}});};const filteredProducts=products.filter(product=>product.title.toLowerCase().includes(searchTerm.toLowerCase()));// Pagination logic\nconst indexOfLastProduct=currentPage*productsPerPage;const indexOfFirstProduct=indexOfLastProduct-productsPerPage;const currentProducts=filteredProducts.slice(indexOfFirstProduct,indexOfLastProduct);// Change page\nconst paginate=pageNumber=>setCurrentPage(pageNumber);const logout=async()=>{try{const response=await axios.post('https://ecommerce-5-730y.onrender.com/api/Logout');localStorage.removeItem('token');navigate('/login');console.log(response.data);console.log(response.data.message);// Logout successful\n}catch(error){console.error('Error logging out:',error);}};return/*#__PURE__*/_jsxs(\"div\",{id:\"full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Product Page\"}),/*#__PURE__*/_jsx(\"input\",{className:\"search\",type:\"text\",placeholder:\"Search products...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:{marginBottom:'16px'}}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"logout\",children:\"Logout\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-icon\",onClick:()=>navigate('/cart'),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faShoppingCart,size:\"2x\"}),/*#__PURE__*/_jsx(\"span\",{className:\"cart-count\",children:cart.length})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid-container\",children:currentProducts.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"item-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.title,style:{width:'100%'}}),/*#__PURE__*/_jsx(\"h3\",{children:product.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: $\",product.price]}),/*#__PURE__*/_jsx(\"p\",{children:product.category}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-container\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddToCart(product),children:\"Add to Cart\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handledescription(product,product.description,product.image),children:\"Description\"})]})]},product._id))}),/*#__PURE__*/_jsx(\"div\",{className:\"page\",children:Array.from({length:Math.ceil(filteredProducts.length/productsPerPage)},(_,index)=>/*#__PURE__*/_jsx(\"button\",{className:\"page-button\",onClick:()=>paginate(index+1),children:index+1},index))})]});};export default ProductPage;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","useCart","FontAwesomeIcon","faShoppingCart","jsx","_jsx","jsxs","_jsxs","ProductPage","products","setProducts","addToCart","cart","searchTerm","setSearchTerm","currentPage","setCurrentPage","productsPerPage","navigate","fetchProducts","response","get","data","error","console","handleAddToCart","product","handledescription","description","image","state","filteredProducts","filter","title","toLowerCase","includes","indexOfLastProduct","indexOfFirstProduct","currentProducts","slice","paginate","pageNumber","logout","post","localStorage","removeItem","log","message","id","children","className","type","placeholder","value","onChange","e","target","style","marginBottom","onClick","icon","size","length","map","src","alt","width","price","category","_id","Array","from","Math","ceil","_","index"],"sources":["C:/Users/varun/Ecommerce-Platform/frontend/src/Pages/Product.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { useCart } from './CartContext';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faShoppingCart } from '@fortawesome/free-solid-svg-icons';\nimport './productstyle.css';\n\nconst ProductPage = () => {\n    const [products, setProducts] = useState([]);\n    const { addToCart, cart } = useCart(); // Access the cart\n    const [searchTerm, setSearchTerm] = useState('');\n    const [currentPage, setCurrentPage] = useState(1);\n    const [productsPerPage] = useState(10); // Number of products per page\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const fetchProducts = async () => {\n            try {\n                const response = await axios.get('https://ecommerce-5-730y.onrender.com/api/products');\n                setProducts(response.data);\n            } catch (error) {\n                console.error('Error fetching products:', error);\n            }\n        };\n\n        fetchProducts();\n    }, []);\n\n    useEffect(() => {\n        setCurrentPage(1);\n    }, [searchTerm]);\n\n    const handleAddToCart = (product) => {\n        addToCart(product);\n    };\n\n    const handledescription = (product,description, image) => {\n        navigate('/DescriptionPage', { state: {product, description, image } });\n    };\n\n    const filteredProducts = products.filter((product) =>\n        product.title.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n\n    // Pagination logic\n    const indexOfLastProduct = currentPage * productsPerPage;\n    const indexOfFirstProduct = indexOfLastProduct - productsPerPage;\n    const currentProducts = filteredProducts.slice(indexOfFirstProduct, indexOfLastProduct);\n\n    // Change page\n    const paginate = (pageNumber) => setCurrentPage(pageNumber);\n\n    const logout = async () => {\n        try {\n            const response = await axios.post('https://ecommerce-5-730y.onrender.com/api/Logout');\n            localStorage.removeItem('token');\n            navigate('/login');\n            console.log(response.data);\n            console.log(response.data.message); // Logout successful\n        } catch (error) {\n            console.error('Error logging out:', error);\n        }\n    };\n\n    return (\n        <div id='full'>\n            <div className='header'>\n                <h1>Product Page</h1>\n                <input\n                    className='search'\n                    type=\"text\"\n                    placeholder=\"Search products...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    style={{ marginBottom: '16px' }}\n                />\n                <button onClick={logout} className='logout'>Logout</button>\n\n                {/* Cart Symbol */}\n                <div className=\"cart-icon\" onClick={() => navigate('/cart')}>\n                    <FontAwesomeIcon icon={faShoppingCart} size=\"2x\" />\n                    <span className=\"cart-count\">{cart.length}</span>\n                </div>\n            </div>\n\n            <div className='grid-container'>\n                {currentProducts.map((product) => (\n                    <div className=\"item-container\" key={product._id}>\n                        <img src={product.image} alt={product.title} style={{ width: '100%' }} />\n                        <h3>{product.title}</h3>\n                        <p>Price: ${product.price}</p>\n                        <p>{product.category}</p>\n                        <div className='button-container'>\n                            <button onClick={() => handleAddToCart(product)}>Add to Cart</button>\n                            <button onClick={() => handledescription(product,product.description, product.image)}>Description</button>\n                        </div>\n                    </div>\n                ))}\n            </div>\n\n            {/* Pagination */}\n            <div className='page'>\n                {Array.from({ length: Math.ceil(filteredProducts.length / productsPerPage) }, (_, index) => (\n                    <button className='page-button' key={index} onClick={() => paginate(index + 1)}>\n                        {index + 1}\n                    </button>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default ProductPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}